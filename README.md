# åœ¨çº¿æ–‡æ¡£ç¼–è¾‘ä¸æœ—è¯»å¹³å°

ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„åœ¨çº¿æ–‡æ¡£å¹³å°ï¼Œæ”¯æŒæ–‡æ¡£ç¼–è¾‘ã€è¯­éŸ³æœ—è¯»ã€AI é—®ç­”å’Œç¬”è®°åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“ **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨** - ä½¿ç”¨ TipTap å®ç°çš„å¼ºå¤§ç¼–è¾‘å™¨
- ğŸ”Š **è¾¹å¬è¾¹çœ‹** - åŸºäºæµè§ˆå™¨åŸç”Ÿ Web Speech API çš„æ–‡æœ¬æœ—è¯»åŠŸèƒ½
- ğŸ¤– **AI æé—®** - é›†æˆ Claude AIï¼Œå¯ä»¥å¯¹æ–‡æ¡£å†…å®¹è¿›è¡Œæ™ºèƒ½é—®ç­”
- ğŸ“š **æˆ‘çš„ä¹¦æ¶** - æ”¶è—å–œæ¬¢çš„æ–‡æ¡£
- ğŸ“‹ **å¤‡æ³¨åŠŸèƒ½** - ä¸ºæ–‡æ¡£æ·»åŠ ä¸ªäººå¤‡æ³¨
- ğŸ‘¥ **ç”¨æˆ·ç³»ç»Ÿ** - å®Œæ•´çš„æ³¨å†Œ/ç™»å½•åŠŸèƒ½
- ğŸ¨ **ç°ä»£åŒ– UI** - åŸºäº Tailwind CSS çš„ç¾è§‚ç•Œé¢

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 19 + Vite
- **è·¯ç”±**: React Router v6
- **æ ·å¼**: Tailwind CSS
- **ç¼–è¾‘å™¨**: TipTap (å¯Œæ–‡æœ¬ç¼–è¾‘)
- **HTTP å®¢æˆ·ç«¯**: Axios
- **è¯­éŸ³**: Web Speech API

### åç«¯
- **è¿è¡Œæ—¶**: Node.js
- **æ¡†æ¶**: Express
- **æ•°æ®åº“**: PostgreSQL
- **ORM**: Prisma
- **è®¤è¯**: JWT + bcrypt
- **AI**: Anthropic Claude API

## é¡¹ç›®ç»“æ„

```
readme_bot/
â”œâ”€â”€ frontend/              # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/     # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ App.jsx       # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/              # Express åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/      # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middleware/  # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ server.js    # æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ prisma/          # æ•°æ®åº“æ¨¡å‹
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+ (æ¨è 20+)
- PostgreSQL 12+
- npm æˆ– yarn

### 1. å®‰è£… PostgreSQL

**macOS (ä½¿ç”¨ Homebrew):**
```bash
brew install postgresql@14
brew services start postgresql@14
```

**åˆ›å»ºæ•°æ®åº“:**
```bash
createdb readme_bot
```

### 2. é…ç½®åç«¯

```bash
cd backend

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®ä»¥ä¸‹å˜é‡:
# - DATABASE_URL: PostgreSQL è¿æ¥å­—ç¬¦ä¸²
# - JWT_SECRET: JWT å¯†é’¥ï¼ˆéšæœºå­—ç¬¦ä¸²ï¼‰
# - ANTHROPIC_API_KEY: Claude API å¯†é’¥ï¼ˆå¯é€‰ï¼ŒAI åŠŸèƒ½éœ€è¦ï¼‰
```

**é…ç½® `.env` æ–‡ä»¶ç¤ºä¾‹:**
```env
DATABASE_URL="postgresql://ç”¨æˆ·å:å¯†ç @localhost:5432/readme_bot"
JWT_SECRET="your-super-secret-jwt-key-change-this"
ANTHROPIC_API_KEY="sk-ant-your-api-key-here"
PORT=5000
```

**è¿è¡Œæ•°æ®åº“è¿ç§»:**
```bash
npm run prisma:generate
npm run prisma:migrate
```

**å¯åŠ¨åç«¯æœåŠ¡å™¨:**
```bash
npm run dev
```

åç«¯å°†è¿è¡Œåœ¨ `http://localhost:5000`

### 3. é…ç½®å‰ç«¯

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ `http://localhost:5173`

## ä½¿ç”¨æŒ‡å—

### æ³¨å†Œå’Œç™»å½•

1. è®¿é—® `http://localhost:5173`
2. ç‚¹å‡»"æ³¨å†Œ"åˆ›å»ºæ–°è´¦å·
3. ä½¿ç”¨é‚®ç®±å’Œå¯†ç ç™»å½•

### åˆ›å»ºæ–‡æ¡£

1. åœ¨é¦–é¡µç‚¹å‡»"æ–°å»ºæ–‡æ¡£"
2. è¾“å…¥æ–‡æ¡£æ ‡é¢˜å’Œå†…å®¹
3. ç‚¹å‡»å·¥å…·æ æŒ‰é’®è¿›è¡Œæ ¼å¼åŒ–ï¼ˆç²—ä½“ã€æ–œä½“ã€æ ‡é¢˜ç­‰ï¼‰
4. ç‚¹å‡»"ä¿å­˜å¹¶åˆ‡æ¢åˆ°é˜…è¯»"ä¿å­˜æ–‡æ¡£

### ä½¿ç”¨æœ—è¯»åŠŸèƒ½

1. æ‰“å¼€ä»»æ„æ–‡æ¡£
2. ç‚¹å‡»å³ä¾§è¾¹æ çš„"å–‡å­"å›¾æ ‡
3. ç‚¹å‡»"å¼€å§‹æœ—è¯»"æŒ‰é’®
4. ä½¿ç”¨"æš‚åœ"ã€"ç»§ç»­"ã€"åœæ­¢"æ§åˆ¶æ’­æ”¾

### AI æé—®

1. ç¡®ä¿å·²åœ¨åç«¯é…ç½® `ANTHROPIC_API_KEY`
2. åœ¨æ–‡æ¡£é¡µé¢ç‚¹å‡»å³ä¾§è¾¹æ çš„"é—®å·"å›¾æ ‡
3. è¾“å…¥å…³äºæ–‡æ¡£çš„é—®é¢˜
4. AI ä¼šåŸºäºæ–‡æ¡£å†…å®¹å›ç­”æ‚¨çš„é—®é¢˜

### æ·»åŠ å¤‡æ³¨

1. åœ¨æ–‡æ¡£é¡µé¢ç‚¹å‡»å³ä¾§è¾¹æ çš„"ç¬”è®°"å›¾æ ‡
2. åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥å¤‡æ³¨å†…å®¹
3. ç‚¹å‡»"æ·»åŠ å¤‡æ³¨"
4. å¯ä»¥ç¼–è¾‘æˆ–åˆ é™¤å·²æœ‰å¤‡æ³¨

### æ”¶è—æ–‡æ¡£

1. åœ¨æ–‡æ¡£é¡µé¢ç‚¹å‡»"æ”¶è—"æŒ‰é’®
2. åœ¨é¡¶éƒ¨å¯¼èˆªæ ç‚¹å‡»"æˆ‘çš„ä¹¦æ¶"æŸ¥çœ‹æ”¶è—çš„æ–‡æ¡£

## API æ¥å£

### è®¤è¯
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•

### æ–‡æ¡£
- `GET /api/documents` - è·å–æ‰€æœ‰æ–‡æ¡£
- `GET /api/documents/:id` - è·å–å•ä¸ªæ–‡æ¡£
- `POST /api/documents` - åˆ›å»ºæ–‡æ¡£
- `PUT /api/documents/:id` - æ›´æ–°æ–‡æ¡£
- `DELETE /api/documents/:id` - åˆ é™¤æ–‡æ¡£

### ä¹¦æ¶
- `GET /api/bookshelf` - è·å–ç”¨æˆ·ä¹¦æ¶
- `POST /api/bookshelf` - æ·»åŠ æ–‡æ¡£åˆ°ä¹¦æ¶
- `DELETE /api/bookshelf/:documentId` - ä»ä¹¦æ¶ç§»é™¤æ–‡æ¡£

### AI
- `POST /api/ai/ask` - å‘ AI æé—®

### å¤‡æ³¨
- `GET /api/notes/document/:documentId` - è·å–æ–‡æ¡£çš„æ‰€æœ‰å¤‡æ³¨
- `POST /api/notes` - åˆ›å»ºå¤‡æ³¨
- `PUT /api/notes/:id` - æ›´æ–°å¤‡æ³¨
- `DELETE /api/notes/:id` - åˆ é™¤å¤‡æ³¨

## å¼€å‘å‘½ä»¤

### åç«¯
```bash
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm start            # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run prisma:generate  # ç”Ÿæˆ Prisma Client
npm run prisma:migrate   # è¿è¡Œæ•°æ®åº“è¿ç§»
npm run prisma:studio    # æ‰“å¼€ Prisma Studioï¼ˆæ•°æ®åº“ç®¡ç†ç•Œé¢ï¼‰
```

### å‰ç«¯
```bash
npm run dev      # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build    # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview  # é¢„è§ˆç”Ÿäº§æ„å»º
```

## æ•°æ®åº“æ¨¡å‹

### User (ç”¨æˆ·)
- id, username, email, password, avatar, createdAt, updatedAt

### Document (æ–‡æ¡£)
- id, title, content, mode, authorId, createdAt, updatedAt

### Chapter (ç« èŠ‚)
- id, documentId, title, order, contentStart, contentEnd, createdAt, updatedAt

### Bookshelf (ä¹¦æ¶)
- id, userId, documentId, addedAt

### Note (å¤‡æ³¨)
- id, documentId, userId, content, position, createdAt, updatedAt

## å¸¸è§é—®é¢˜

### Q: Web Speech API ä¸å·¥ä½œï¼Ÿ
A: Web Speech API åœ¨ä¸åŒæµè§ˆå™¨ä¸­æ”¯æŒç¨‹åº¦ä¸åŒã€‚æ¨èä½¿ç”¨ Chromeã€Edge æˆ– Safariã€‚Firefox æ”¯æŒæœ‰é™ã€‚

### Q: AI åŠŸèƒ½è¿”å›é”™è¯¯ï¼Ÿ
A: è¯·ç¡®ä¿åœ¨åç«¯ `.env` æ–‡ä»¶ä¸­é…ç½®äº†æœ‰æ•ˆçš„ `ANTHROPIC_API_KEY`ã€‚æ‚¨å¯ä»¥åœ¨ https://console.anthropic.com è·å– API å¯†é’¥ã€‚

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ PostgreSQL æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œå¹¶ç¡®ä¿ `DATABASE_URL` é…ç½®æ­£ç¡®ã€‚

### Q: ç«¯å£è¢«å ç”¨ï¼Ÿ
A: ä¿®æ”¹åç«¯ `.env` æ–‡ä»¶ä¸­çš„ `PORT` å˜é‡ï¼Œæˆ–å‰ç«¯çš„ `vite.config.js` ä¸­çš„ç«¯å£é…ç½®ã€‚

## ç”Ÿäº§éƒ¨ç½²

### åç«¯éƒ¨ç½²å»ºè®®
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
- å¯ç”¨ HTTPS
- é…ç½® CORS ç™½åå•
- ä½¿ç”¨ PM2 æˆ–ç±»ä¼¼å·¥å…·ç®¡ç†è¿›ç¨‹
- é…ç½®æ•°æ®åº“å¤‡ä»½

### å‰ç«¯éƒ¨ç½²å»ºè®®
- æ„å»ºç”Ÿäº§ç‰ˆæœ¬: `npm run build`
- ä½¿ç”¨ Nginx æˆ– Vercel æ‰˜ç®¡é™æ€æ–‡ä»¶
- é…ç½®æ­£ç¡®çš„ API åœ°å€

## å¾…æ”¹è¿›åŠŸèƒ½

- [ ] æ–‡æ¡£åä½œç¼–è¾‘
- [ ] ç›®å½•è‡ªåŠ¨ç”Ÿæˆ
- [ ] æ›´å¤šç¼–è¾‘å™¨æ ¼å¼é€‰é¡¹
- [ ] æ–‡æ¡£å¯¼å‡ºï¼ˆPDFã€Markdownï¼‰
- [ ] è¯­éŸ³æœ—è¯»é€Ÿåº¦è°ƒèŠ‚
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] æš—é»‘æ¨¡å¼
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–

## è®¸å¯è¯

MIT

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issueã€‚
